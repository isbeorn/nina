<!--
    Copyright © 2016 - 2024 Stefan Berg <isbeorn86+NINA@googlemail.com> and the N.I.N.A. contributors

    This file is part of N.I.N.A. - Nighttime Imaging 'N' Astronomy.

    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.-->
<ResourceDictionary
    x:Class="NINA.Sequencer.Logic.Datatemplates"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:alt="clr-namespace:NINA.WPF.Base.View;assembly=NINA.WPF.Base"
    xmlns:behaviors="clr-namespace:NINA.Sequencer.Behaviors"
    xmlns:converter="clr-namespace:NINA.View.Sequencer.Converter"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:NINA.Sequencer.Logic"
    xmlns:ninactrl="clr-namespace:NINA.CustomControlLibrary;assembly=NINA.CustomControlLibrary"
    xmlns:ns="clr-namespace:NINA.Core.Locale;assembly=NINA.Core"
    xmlns:rules="clr-namespace:NINA.Core.Utility.ValidationRules;assembly=NINA.Core"
    xmlns:util="clr-namespace:NINA.Core.Utility;assembly=NINA.Core"
    xmlns:view="clr-namespace:NINA.View.Sequencer"
    xmlns:wpfbehaviors="clr-namespace:NINA.WPF.Base.Behaviors;assembly=NINA.WPF.Base">

    <DataTemplate DataType="{x:Type local:IfExpression}">
        <view:SequenceContainerView />
    </DataTemplate>

    <!--<DataTemplate DataType="{x:Type local:IfThenElse}">
        <StackPanel Orientation="Vertical">
            <view:SequenceContainerView />
            <view:SequenceContainerView DataContext="{Binding ElseContainer}"/>
        </StackPanel>
    </DataTemplate>-->


    <DataTemplate DataType="{x:Type local:IfThenElse}">
        <Border>
            <ninactrl:DetachingExpander>
                <ninactrl:DetachingExpander.Header>
                    <Grid
                      MinHeight="35"
                      Margin="0"
                      HorizontalAlignment="{Binding HorizontalAlignment, RelativeSource={RelativeSource AncestorType=ContentPresenter}, Mode=OneWayToSource}"
                      Background="{StaticResource SecondaryBackgroundBrush}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock 
                                 MinHeight="25"
                                 Foreground="White"
                                 Margin="10,10,10,0"
                                 HorizontalAlignment="Left"
                                 VerticalAlignment="Center"
                                 Text="If/Then/Else" />
                            <Border
                               Width="20"
                               Height="20"
                               Margin="5,0,5,0"
                               Background="{StaticResource NotificationErrorBrush}"
                               BorderBrush="Transparent"
                               CornerRadius="10">
                                <Border.Visibility>
                                    <PriorityBinding>
                                        <Binding
                                           Converter="{StaticResource ZeroToVisibilityConverter}"
                                           FallbackValue="Collapsed"
                                           Path="Issues.Count" />
                                    </PriorityBinding>
                                </Border.Visibility>
                                <Path
                                   HorizontalAlignment="Right"
                                   Data="{StaticResource ExclamationCircledSVG}"
                                   Fill="{StaticResource ButtonForegroundBrush}"
                                   Stretch="Uniform" />
                                <Border.ToolTip>
                                    <ItemsControl ItemsSource="{Binding Issues}" />
                                </Border.ToolTip>
                            </Border>
                        </StackPanel>
                    </Grid>
                </ninactrl:DetachingExpander.Header>
                <StackPanel Grid.Row="1" Orientation="Vertical">
                    <view:SequenceContainerView />
                    <view:SequenceContainerView DataContext="{Binding ElseContainer}"/>
                </StackPanel>
            </ninactrl:DetachingExpander>
        </Border>
    </DataTemplate>


</ResourceDictionary>