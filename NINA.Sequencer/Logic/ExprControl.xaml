<UserControl
    x:Class="NINA.Sequencer.Logic.ExprControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:NINA.Sequencer.Logic"
    xmlns:ninactrl="clr-namespace:NINA.CustomControlLibrary;assembly=NINA.CustomControlLibrary"
    xmlns:s="clr-namespace:System;assembly=mscorlib">
    <UserControl.Resources>
        <local:ExprConverter x:Key="ec" />
    </UserControl.Resources>

    <StackPanel
        Height="30"
        Margin="0,-2,0,0"
        VerticalAlignment="Center"
        DataContext="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:ExprControl}}}"
        Orientation="Horizontal">
        <TextBlock Margin="0,8,0,0" Text="{Binding Label}" />
        <TextBlock
            Margin="5,2,0,0"
            FontSize="18"
            Foreground="{Binding Exp.InfoButtonColor}"
            Text="&#x26A0;"
            Visibility="{Binding Exp.Error, Converter={StaticResource NullToVisibilityCollapsedConverter}}">
            <TextBlock.ToolTip>
                <TextBlock
                    MinHeight="20"
                    Margin="0,-2,0,0"
                    VerticalAlignment="Center"
                    FontSize="14"
                    FontStyle="Italic"
                    Foreground="Orange"
                    Text="{Binding Exp.ExprErrors}" />
            </TextBlock.ToolTip>
        </TextBlock>
        <ninactrl:HintTextBox
            MinWidth="32"
            Margin="5,0,0,0"
            VerticalAlignment="Center"
            HorizontalContentAlignment="Center"
            VerticalContentAlignment="Center"
            Foreground="GreenYellow"
            HintTextMargin="0,-2,0,0"
            HintTextOpacity="0.65"
            TextAlignment="Center"
            ToolTip=""
            ToolTipOpening="ShowSymbols">
            <ninactrl:HintTextBox.HintText>
                <Binding
                    Mode="OneWay"
                    Path="Exp.DefaultString"
                    UpdateSourceTrigger="PropertyChanged" />
            </ninactrl:HintTextBox.HintText>
            <ninactrl:HintTextBox.Text>
                <Binding Mode="TwoWay" Path="Exp.Definition" />
            </ninactrl:HintTextBox.Text>
        </ninactrl:HintTextBox>

        <TextBlock
            Margin="2,2,0,0"
            VerticalAlignment="Center"
            Foreground="GreenYellow"
            Visibility="{Binding Exp.IsAnnotated, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}">
            >
            <TextBlock.Text>
                <MultiBinding Converter="{StaticResource ec}">
                    <Binding Path="Exp" />
                    <Binding Path="Exp.ValueString" />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>

        <TextBlock
            Margin="2,8,0,0"
            Opacity=".5"
            Text="{Binding Unit}" />


    </StackPanel>
</UserControl>
